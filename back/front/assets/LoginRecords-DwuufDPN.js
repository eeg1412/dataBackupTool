import{_ as h}from"./Layout-DXucR0bO.js";import{a as f}from"./index-BDcExPYf.js";import{h as w,i as C,j,r as i,o as r,a as e,c as d,t as a,F as b,k as m,n as v,g as _,d as B}from"./index-B0d6AujN.js";const P={class:"space-y-4 sm:space-y-6"},N={class:"flex items-center justify-between"},V=["disabled"],$={key:0,class:"flex justify-center py-12"},z={key:1,class:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 p-4 rounded-lg text-sm sm:text-base"},D={key:0,class:"text-center py-12 text-gray-500 dark:text-gray-400"},I={key:1},L={class:"flex items-center justify-between mb-3"},R={class:"text-sm text-gray-500 dark:text-gray-400"},F={class:"hidden sm:block bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden"},M={class:"w-full text-sm"},A={class:"divide-y divide-gray-100 dark:divide-gray-700"},E={class:"px-4 py-2.5 text-gray-700 dark:text-gray-300 whitespace-nowrap"},T={class:"px-4 py-2.5 text-gray-900 dark:text-white"},q={class:"bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs"},G={class:"px-4 py-2.5 text-gray-700 dark:text-gray-300"},H={class:"bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded text-xs"},J={class:"px-4 py-2.5"},K={class:"sm:hidden space-y-2"},O={class:"flex items-center justify-between mb-1.5"},Q={class:"text-xs text-gray-500 dark:text-gray-400"},S={class:"flex items-center space-x-3 text-xs"},U={class:"text-gray-600 dark:text-gray-400"},W={class:"bg-gray-100 dark:bg-gray-700 px-1 py-0.5 rounded"},X={class:"text-gray-600 dark:text-gray-400"},Y={class:"bg-gray-100 dark:bg-gray-700 px-1 py-0.5 rounded"},Z={key:0,class:"flex items-center justify-center space-x-2 mt-4"},ee=["disabled"],te={class:"text-sm text-gray-600 dark:text-gray-400"},se=["disabled"],le={__name:"LoginRecords",setup(ae){const o=i(!1),c=i(""),g=i([]),l=i(1),p=i(0),y=i(0);w(()=>{x(1)});async function x(n=1){o.value=!0,c.value="";try{const t=await f.loginRecords(n,50);g.value=t.data.items,l.value=t.data.page,p.value=t.data.total,y.value=t.data.totalPages}catch(t){c.value=t.response?.data?.error||"加载登录记录失败"}finally{o.value=!1}}function k(n){if(!n)return"";try{return new Date(n).toLocaleString("zh-CN")}catch{return n}}return(n,t)=>(r(),C(h,null,{default:j(()=>[e("div",P,[e("div",N,[t[3]||(t[3]=e("h2",{class:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white"}," 登录记录 ",-1)),e("button",{onClick:t[0]||(t[0]=s=>x(1)),disabled:o.value,class:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50"}," 刷新 ",8,V)]),o.value&&!g.value.length?(r(),d("div",$,[...t[4]||(t[4]=[e("svg",{class:"animate-spin h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1)])])):c.value?(r(),d("div",z,a(c.value),1)):(r(),d(b,{key:2},[g.value.length===0?(r(),d("div",D,[...t[5]||(t[5]=[e("p",null,"暂无登录记录",-1)])])):(r(),d("div",I,[e("div",L,[e("p",R," 共 "+a(p.value)+" 条记录 ",1)]),e("div",F,[e("table",M,[t[6]||(t[6]=e("thead",null,[e("tr",{class:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700"},[e("th",{class:"text-left px-4 py-3 font-medium text-gray-600 dark:text-gray-300"}," 时间 "),e("th",{class:"text-left px-4 py-3 font-medium text-gray-600 dark:text-gray-300"}," 用户名 "),e("th",{class:"text-left px-4 py-3 font-medium text-gray-600 dark:text-gray-300"}," IP 地址 "),e("th",{class:"text-left px-4 py-3 font-medium text-gray-600 dark:text-gray-300"}," 状态 ")])],-1)),e("tbody",A,[(r(!0),d(b,null,m(g.value,(s,u)=>(r(),d("tr",{key:u,class:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors"},[e("td",E,a(k(s.timestamp)),1),e("td",T,[e("code",q,a(s.username),1)]),e("td",G,[e("code",H,a(s.ip),1)]),e("td",J,[e("span",{class:v([s.success?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium"])},a(s.success?"成功":"失败"),3)])]))),128))])])]),e("div",K,[(r(!0),d(b,null,m(g.value,(s,u)=>(r(),d("div",{key:u,class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-3"},[e("div",O,[e("span",Q,a(k(s.timestamp)),1),e("span",{class:v([s.success?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400","inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium"])},a(s.success?"成功":"失败"),3)]),e("div",S,[e("span",U,[t[7]||(t[7]=_("用户: ",-1)),e("code",W,a(s.username),1)]),e("span",X,[t[8]||(t[8]=_("IP: ",-1)),e("code",Y,a(s.ip),1)])])]))),128))]),y.value>1?(r(),d("div",Z,[e("button",{onClick:t[1]||(t[1]=s=>x(l.value-1)),disabled:l.value<=1||o.value,class:"px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors disabled:opacity-40 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300"}," 上一页 ",8,ee),e("span",te,a(l.value)+" / "+a(y.value),1),e("button",{onClick:t[2]||(t[2]=s=>x(l.value+1)),disabled:l.value>=y.value||o.value,class:"px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors disabled:opacity-40 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300"}," 下一页 ",8,se)])):B("",!0)]))],64))])]),_:1}))}};export{le as default};
