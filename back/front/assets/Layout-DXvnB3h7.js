import{r as v,_ as C,o as n,c as a,p,j as x,F as k,k as h,q as w,n as f,a as e,t as y,T as M,u as L,x as z,g as _,d as $,y as B,z as T}from"./index-CI_0327A.js";import{a as j}from"./index-CohND7i7.js";const b=v([]);let V=0;function D(){function u(t,s="info",o=3e3){const g=++V,l={id:g,message:t,type:s,visible:!0};return b.value.push(l),o>0&&setTimeout(()=>{m(g)},o),g}function m(t){const s=b.value.findIndex(o=>o.id===t);s>-1&&b.value.splice(s,1)}function d(t,s=3e3){return u(t,"success",s)}function i(t,s=5e3){return u(t,"error",s)}function c(t,s=3e3){return u(t,"info",s)}function r(t,s=4e3){return u(t,"warning",s)}return{toasts:b,showToast:u,removeToast:m,success:d,error:i,info:c,warning:r}}const I={class:"fixed top-4 right-4 z-50 flex flex-col gap-2 pointer-events-none max-w-[90vw] sm:max-w-md"},N={class:"shrink-0 mt-0.5"},R={key:0,class:"w-5 h-5 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 20 20"},S={key:1,class:"w-5 h-5 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 20 20"},E={key:2,class:"w-5 h-5 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 20 20"},F={key:3,class:"w-5 h-5 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 20 20"},H={class:"flex-1 min-w-0"},A={class:"text-sm sm:text-base font-medium break-all"},P=["onClick"],q={__name:"Toast",setup(u){const{toasts:m,removeToast:d}=D();function i(c){const r={success:"bg-green-50 dark:bg-green-900/90 text-green-800 dark:text-green-100 border border-green-200 dark:border-green-800",error:"bg-red-50 dark:bg-red-900/90 text-red-800 dark:text-red-100 border border-red-200 dark:border-red-800",warning:"bg-yellow-50 dark:bg-yellow-900/90 text-yellow-800 dark:text-yellow-100 border border-yellow-200 dark:border-yellow-800",info:"bg-blue-50 dark:bg-blue-900/90 text-blue-800 dark:text-blue-100 border border-blue-200 dark:border-blue-800"};return r[c]||r.info}return(c,r)=>(n(),a("div",I,[p(M,{name:"toast"},{default:x(()=>[(n(!0),a(k,null,h(w(m),t=>(n(),a("div",{key:t.id,class:f(["pointer-events-auto rounded-lg shadow-lg p-3 sm:p-4 flex items-start gap-3 backdrop-blur-sm transition-all",i(t.type)])},[e("div",N,[t.type==="success"?(n(),a("svg",R,[...r[0]||(r[0]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):t.type==="error"?(n(),a("svg",S,[...r[1]||(r[1]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)])])):t.type==="warning"?(n(),a("svg",E,[...r[2]||(r[2]=[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)])])):(n(),a("svg",F,[...r[3]||(r[3]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])]))]),e("div",H,[e("p",A,y(t.message),1)]),e("button",{onClick:s=>w(d)(t.id),class:"shrink-0 opacity-70 hover:opacity-100 transition-opacity"},[...r[4]||(r[4]=[e("svg",{class:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],8,P)],2))),128))]),_:1})]))}},G=C(q,[["__scopeId","data-v-509e2e12"]]),O={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors"},J={class:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"},K={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Q={class:"flex justify-between h-14 sm:h-16"},U={class:"flex items-center space-x-4 sm:space-x-8"},W={class:"hidden sm:flex space-x-1"},X={class:"flex items-center space-x-2 sm:space-x-3"},Y=["title"],Z={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ee={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},te={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},oe={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},re={key:0,class:"sm:hidden border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"},se={class:"px-3 py-2 space-y-1"},ne={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8"},ie={__name:"Layout",setup(u){const m=L(),d=v(document.documentElement.classList.contains("dark")),i=v(!1),c=[{to:"/files",name:"Files",label:"文件管理"},{to:"/borg",name:"Borg",label:"Borg 备份"},{to:"/passwords",name:"Passwords",label:"密码管理"},{to:"/login-records",name:"LoginRecords",label:"登录记录"}];function r(){d.value=!d.value,document.documentElement.classList.toggle("dark"),localStorage.setItem("darkMode",d.value.toString())}async function t(){try{await j.logout()}catch{}T(),m.push({name:"Login"})}return(s,o)=>{const g=z("RouterLink");return n(),a("div",O,[e("nav",J,[e("div",K,[e("div",Q,[e("div",U,[o[2]||(o[2]=e("h1",{class:"text-base sm:text-lg font-bold text-gray-900 dark:text-white whitespace-nowrap"}," Data Backup Tool ",-1)),e("div",W,[(n(),a(k,null,h(c,l=>p(g,{key:l.to,to:l.to,class:f(["px-3 py-2 rounded-md text-sm font-medium transition-colors",s.$route.name===l.name?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:x(()=>[_(y(l.label),1)]),_:2},1032,["to","class"])),64))])]),e("div",X,[e("button",{onClick:r,class:"p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:d.value?"切换亮色模式":"切换深色模式"},[d.value?(n(),a("svg",Z,[...o[3]||(o[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])])):(n(),a("svg",ee,[...o[4]||(o[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])]))],8,Y),e("button",{onClick:t,class:"hidden sm:block px-3 py-1.5 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors"}," 退出登录 "),e("button",{onClick:o[0]||(o[0]=l=>i.value=!i.value),class:"sm:hidden p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[i.value?(n(),a("svg",oe,[...o[6]||(o[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):(n(),a("svg",te,[...o[5]||(o[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1)])]))])])])]),i.value?(n(),a("div",re,[e("div",se,[(n(),a(k,null,h(c,l=>p(g,{key:l.to,to:l.to,onClick:o[1]||(o[1]=ae=>i.value=!1),class:f(["block px-3 py-2.5 rounded-md text-sm font-medium transition-colors",s.$route.name===l.name?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},{default:x(()=>[_(y(l.label),1)]),_:2},1032,["to","class"])),64)),e("button",{onClick:t,class:"w-full text-left px-3 py-2.5 rounded-md text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"}," 退出登录 ")])])):$("",!0)]),e("main",ne,[B(s.$slots,"default")]),p(G)])}}};export{ie as _,D as u};
