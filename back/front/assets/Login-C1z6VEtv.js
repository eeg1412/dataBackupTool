import{r as o,c as l,a as t,b as k,w as x,t as f,d as h,e as b,v as p,f as w,g as _,u as M,o as d,s as C}from"./index-CI_0327A.js";import{a as V}from"./index-CohND7i7.js";const B={class:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 px-4 transition-colors"},j={class:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8"},z={key:0,class:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 p-3 rounded-lg text-sm"},D=["disabled"],S=["disabled"],L={class:"flex items-center justify-between"},N={class:"flex items-center cursor-pointer"},T=["disabled"],E=["title"],U={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},q={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},A=["disabled"],H={key:0,class:"flex items-center justify-center"},I={key:1},G={__name:"Login",setup(F){const m=M(),u=o(""),c=o(""),g=o(!1),r=o(!1),s=o(""),n=o(document.documentElement.classList.contains("dark"));function v(){n.value=!n.value,document.documentElement.classList.toggle("dark"),localStorage.setItem("darkMode",n.value.toString())}async function y(){if(!r.value){s.value="",r.value=!0;try{const a=await V.login(u.value,c.value,g.value);C(a.data.token,g.value),m.push({name:"Files"})}catch(a){a.response?.data?.error?s.value=a.response.data.error:a.response?.status===0||!a.response?s.value="网络连接失败，请检查网络":s.value="登录失败，请重试"}finally{r.value=!1}}}return(a,e)=>(d(),l("div",B,[t("div",j,[e[9]||(e[9]=k('<div class="text-center mb-8"><div class="mx-auto w-12 h-12 bg-blue-100 dark:bg-blue-900/40 rounded-full flex items-center justify-center mb-4"><svg class="w-6 h-6 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg></div><h1 class="text-2xl font-bold text-gray-900 dark:text-white"> Data Backup Tool </h1><p class="mt-2 text-sm text-gray-500 dark:text-gray-400"> 登录以访问管理后台 </p></div>',1)),t("form",{onSubmit:x(y,["prevent"]),class:"space-y-5"},[s.value?(d(),l("div",z,f(s.value),1)):h("",!0),t("div",null,[e[3]||(e[3]=t("label",{for:"username",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," 用户名 ",-1)),b(t("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=i=>u.value=i),type:"text",required:"",autocomplete:"username",disabled:r.value,class:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition disabled:opacity-50",placeholder:"请输入用户名"},null,8,D),[[p,u.value,void 0,{trim:!0}]])]),t("div",null,[e[4]||(e[4]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," 密码 ",-1)),b(t("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=i=>c.value=i),type:"password",required:"",autocomplete:"current-password",disabled:r.value,class:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition disabled:opacity-50",placeholder:"请输入密码"},null,8,S),[[p,c.value]])]),t("div",L,[t("label",N,[b(t("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>g.value=i),type:"checkbox",disabled:r.value,class:"w-4 h-4 text-blue-600 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"},null,8,T),[[w,g.value]]),e[5]||(e[5]=t("span",{class:"ml-2 text-sm text-gray-600 dark:text-gray-400"},"长期保持登录",-1))]),t("button",{type:"button",onClick:v,class:"p-1.5 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:n.value?"亮色模式":"深色模式"},[n.value?(d(),l("svg",U,[...e[6]||(e[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])])):(d(),l("svg",q,[...e[7]||(e[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])]))],8,E)]),t("button",{type:"submit",disabled:r.value||!u.value||!c.value,class:"w-full py-2.5 px-4 bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[r.value?(d(),l("span",H,[...e[8]||(e[8]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1),_(" 登录中... ",-1)])])):(d(),l("span",I,"登录"))],8,A)],32)])]))}};export{G as default};
